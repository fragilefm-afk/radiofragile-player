// RadioFragile Player V56 - HoloGL Terminal
// Custom streaming audio player with Web Audio API
// Features: Waveform visualization, Stereo VU meter, WebGL holographic overlay,
//           Audio FX (Filter, Delay, Crush), Immersive mode, Terminal UI
// https://fragilefm.webflow.io/

document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("audio-element"),t=document.getElementById("play-btn"),n=document.getElementById("prev-btn"),i=document.getElementById("next-btn"),a=document.getElementById("volume-slider"),r=document.getElementById("progress-bar"),o=document.getElementById("progress-fill"),l=document.getElementById("current-track"),s=document.getElementById("current-artist"),c=document.getElementById("current-time"),d=document.getElementById("total-time"),u=document.getElementById("elapsed-time"),f=document.getElementById("remaining-time"),m=document.getElementById("playlist-toggle"),h=document.getElementById("playlist-dropdown"),g=document.getElementById("playlist-items"),p=document.getElementById("track-count"),v=document.querySelector(".station-logo img"),y=document.querySelector(".live-badge");let b=!1,w=-1,E=[],L=null,I=!1,C=[],M=null,T=null,A=null,R=null,F=!1,S=null,k=0,N=0,X=null,Y=null,Q=null,Z=!1,rfIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)||("MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),rfPP=!1;var rfSpkCvs=null,rfSpkCtx=null,rfSpkSmL=0;var rfFx={f:0,d:0,w:0},rfFxF=null,rfFxW=null,rfFxD=null,rfFxFb=null,rfFxWet=null;var rfFxFV=[20000,800,2000,6000],rfFxDV=[0,.15,.3,.6],rfFxWA=[0,10,50,200];function rfFxApply(){if(!rfFxF||!M)return;rfFxF.frequency.setValueAtTime(rfFxFV[rfFx.f],M.currentTime);if(rfFxD){rfFxD.delayTime.setValueAtTime(rfFx.d>0?rfFxDV[rfFx.d]:.001,M.currentTime);rfFxFb.gain.setValueAtTime(rfFx.d>0?.4:0,M.currentTime);rfFxWet.gain.setValueAtTime(rfFx.d>0?.5:0,M.currentTime)}if(rfFxW){if(rfFx.w===0)rfFxW.curve=null;else{var amt=rfFxWA[rfFx.w],cv=new Float32Array(256);for(var gi=0;gi<256;gi++){var xv=gi*2/255-1;cv[gi]=Math.tanh(xv*amt/10)}rfFxW.curve=cv}}}var rfThemeColors={primary:"#00ffff",primaryRgb:"0,255,255",accent:"#ff00ff",accentRgb:"255,0,255"};function rfUpdateThemeColors(){var cs=getComputedStyle(document.documentElement);rfThemeColors.primary=cs.getPropertyValue("--rf-primary").trim()||"#00ffff";rfThemeColors.primaryRgb=cs.getPropertyValue("--rf-primary-rgb").trim()||"0,255,255";rfThemeColors.accent=cs.getPropertyValue("--rf-accent").trim()||"#ff00ff";rfThemeColors.accentRgb=cs.getPropertyValue("--rf-accent-rgb").trim()||"255,0,255"}rfUpdateThemeColors();function rfPA(an){if(!rfIOS||!an||an._rfP)return;an._rfP=!0;var orig=an.getByteFrequencyData.bind(an);an.getByteFrequencyData=function(arr){orig(arr);if(b){var sum=0;for(var si=0;si<Math.min(128,arr.length);si++)sum+=arr[si];if(sum<200){var tm=performance.now()/1e3;var kick=Math.pow(Math.max(0,Math.sin(tm*5.24)),12);var hat=0.3+0.3*Math.sin(tm*11.5);var snr=Math.pow(Math.max(0,Math.sin(tm*2.62+1.57)),8);for(var pi=0;pi<arr.length;pi++){var fr=pi/arr.length;var v=0;if(fr<0.02){v=220*kick+60*snr+40}else if(fr<0.06){v=(180-800*fr)*kick+80*snr+30+50*Math.sin(tm*3.1+fr*20)}else if(fr<0.2){v=120*(1-fr*3)+60*Math.sin(tm*2.5+fr*8)+40*snr}else if(fr<0.5){v=80*(1-fr)+50*Math.sin(tm*4.2+fr*12)+30*hat}else{v=40*(1-fr)+25*hat*Math.sin(tm*6.3-fr*15)+15*Math.sin(tm*8.1+fr*25)}arr[pi]=Math.min(255,Math.max(0,Math.floor(v)))}}}}};e.crossOrigin="anonymous",e.preload="auto",e.playsInline=!0,e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","");function ne(){Z=!Z;const e=document.getElementById("rf-immersive-overlay"),t=document.getElementById("rf-immersive-btn");Z?(e.classList.add("active"),t.classList.add("active"),t.innerHTML='<i class="fas fa-sun"></i>',document.body.classList.add("rf-immersive-active")):(e.classList.remove("active"),t.classList.remove("active"),t.innerHTML='<i class="fas fa-moon"></i>',document.body.classList.remove("rf-immersive-active"))}function ae(){if(!Q||0===E.length)return;const e=E[w]||{title:"Select a track",artist:"",label:"",year:""};let t=fe(w)+1;t>=E.length&&(t=0);const n=E[C[t]]||{title:"---",artist:"",label:"",year:""},i=re(e),a=re(n),r=Q.querySelectorAll("#listening-current, .listening-current-dup"),o=Q.querySelectorAll("#listening-next, .listening-next-dup");r.forEach(e=>{e.innerHTML=i}),o.forEach(e=>{e.innerHTML=`<span class="listening-next-label">NEXT:</span>${a}`})}function re(e){let t=`<span class="listening-track-title">${e.title||"---"}</span>`;return e.artist&&(t+=`<span class="listening-track-artist">${e.artist}</span>`),e.label&&(t+=`<span class="listening-track-label">${e.label}</span>`),e.year&&(t+=`<span class="listening-track-year">${e.year}</span>`),t}function rfSpkResize(){if(!rfSpkCvs)return;var rc=rfSpkCvs.getBoundingClientRect(),dp=window.devicePixelRatio||1;if(rc.width<1||rc.height<1)return;rfSpkCvs.width=rc.width*dp;rfSpkCvs.height=rc.height*dp;rfSpkCtx.setTransform(dp,0,0,dp,0,0);rfSpkCvs.style.width=rc.width+"px";rfSpkCvs.style.height=rc.height+"px"}var rfIdL=null;function rfIdA(){rfIdL&&cancelAnimationFrame(rfIdL);(function lp(){if(document.hidden){rfIdL=requestAnimationFrame(lp);return}rfDrawSpikes();rfIdL=requestAnimationFrame(lp)})()}function rfIdS(){rfIdL&&(cancelAnimationFrame(rfIdL),rfIdL=null)}function rfDrawSpikes(){if(!rfSpkCtx||!rfSpkCvs)return;var dp=window.devicePixelRatio||1;var cw=rfSpkCvs.width/dp,ch=rfSpkCvs.height/dp;if(cw<2||ch<2){rfSpkResize();cw=rfSpkCvs.width/dp;ch=rfSpkCvs.height/dp;if(cw<2||ch<2)return}var mid=ch/2,hR=mid-1;rfSpkCtx.fillStyle="#000";rfSpkCtx.fillRect(0,0,cw,ch);var en=0;if(b&&T&&R){T.getByteFrequencyData(R);var s=0;for(var fi=0;fi<R.length;fi++)s+=R[fi];en=s/(255*R.length);en=Math.min(1,en*5.5)}rfSpkSmL=rfSpkSmL*0.25+en*0.75;var px,aB,aB2;if(b){var progress=0;if(e.duration&&!isNaN(e.duration))progress=e.currentTime/e.duration;px=progress*cw;aB=hR*(0.08+1.2*Math.min(1,rfSpkSmL));aB2=aB*(0.4+0.3*rfSpkSmL)}else{px=(e.duration&&!isNaN(e.duration)&&e.currentTime>0)?e.currentTime/e.duration*cw:cw/2;var tm=performance.now()/1e3;var k=0.15+0.35*(0.5+0.5*Math.sin(tm*1.2));aB=hR*k;aB2=hR*(0.05+0.2*(0.5+0.5*Math.sin(tm*1.2-0.8)))}if(b&&px>0){rfSpkCtx.fillStyle="rgba("+rfThemeColors.primaryRgb+",0.025)";rfSpkCtx.fillRect(0,0,px,ch)}rfSpkCtx.strokeStyle=rfThemeColors.primary;rfSpkCtx.lineWidth=2;rfSpkCtx.shadowColor=rfThemeColors.primary;rfSpkCtx.shadowBlur=8;rfSpkCtx.beginPath();rfSpkCtx.moveTo(0,mid);rfSpkCtx.lineTo(Math.max(0,px-18),mid);rfSpkCtx.lineTo(Math.max(0,px-15),mid-aB2*0.6);rfSpkCtx.lineTo(Math.max(0,px-12),mid+aB2*0.8);rfSpkCtx.lineTo(Math.max(0,px-9),mid);rfSpkCtx.lineTo(Math.max(0,px-6),mid+aB*0.2);rfSpkCtx.lineTo(Math.max(0,px-2),mid-aB);rfSpkCtx.lineTo(Math.max(0,px+2),mid+aB*0.65);rfSpkCtx.lineTo(Math.max(0,px+5),mid-aB*0.1);rfSpkCtx.lineTo(Math.max(0,px+8),mid);rfSpkCtx.lineTo(cw,mid);rfSpkCtx.stroke();rfSpkCtx.shadowBlur=0;rfSpkCtx.strokeStyle="rgba("+rfThemeColors.primaryRgb+",0.12)";rfSpkCtx.lineWidth=5;rfSpkCtx.stroke();rfSpkCtx.strokeStyle="rgba("+rfThemeColors.accentRgb+",0.06)";rfSpkCtx.lineWidth=8;rfSpkCtx.stroke();if(b&&px>0){rfSpkCtx.strokeStyle="rgba("+rfThemeColors.primaryRgb+",0.5)";rfSpkCtx.lineWidth=1;rfSpkCtx.shadowColor=rfThemeColors.primary;rfSpkCtx.shadowBlur=12;rfSpkCtx.beginPath();rfSpkCtx.moveTo(px,0);rfSpkCtx.lineTo(px,ch);rfSpkCtx.stroke();rfSpkCtx.shadowBlur=0}}function se(){M&&"suspended"===M.state&&M.resume()}function ce(){de(),k=e.currentTime,N=0,S=setInterval(()=>{b&&(e.currentTime!==k||e.paused||e.ended?N=0:(N++,N>=3&&(se(),e.currentTime+=.1,N=0)),k=e.currentTime)},2e3)}function de(){S&&(clearInterval(S),S=null)}function ue(){C=[...Array(E.length).keys()];if(I){for(let e=C.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[C[e],C[t]]=[C[t],C[e]]}if(w>=0&&E.length>2){var ci=C.indexOf(w);if(ci>0){C.splice(ci,1);C.unshift(w)}}}}function fe(e){return I?C.indexOf(e):e}function me(){if(p&&(p.textContent=E.length),!g||0===E.length)return;var rfMd=m.querySelector(".rf-pl-mode");if(!rfMd){rfMd=document.createElement("div");rfMd.className="rf-pl-mode";m.appendChild(rfMd)}rfMd.style.display="none";let e='';C.forEach((t,n)=>{const i=E[t];e+=`
<div class="playlist-item ${t===w?"playing":""}" data-index="${t}">
<div class="item-thumbnail">
<img src="${i.thumbnail}" loading="lazy">
</div>
<div class="item-number">${String(n+1).padStart(2,"0")}</div>
<div class="item-info">
<div class="item-title">${String(n+1).padStart(2,"0")+". "+i.title}</div>
<div class="item-artist">${i.artist}</div>
<div class="item-meta">
${i.label?`<span class="item-label">${i.label}</span>`:""}
${i.year?`<span class="item-year">${i.year}</span>`:""}
</div>
</div>
<div class="item-indicator"></div>
</div>
`}),g.innerHTML=e,document.querySelectorAll(".playlist-item").forEach(e=>e.addEventListener("click",function(){he(parseInt(this.getAttribute("data-index")))}));}function he(n){if(n<0||n>=E.length)return;!function(){if(!M)try{M=new(window.AudioContext||window.webkitAudioContext),T=M.createAnalyser(),T.fftSize=2048,T.smoothingTimeConstant=.3,R=new Uint8Array(T.frequencyBinCount),rfPA(T)}catch(e){console.error("[RF] Audio context error:",e)}}(),se();const i=E[n];w=n,l&&(l.textContent=i.title),s&&(s.textContent=i.artist),l&&l.classList.add("buffering"),e.pause(),e.src=function(e){if("dropbox"===e.source){if(e.rlkey&&e.dropboxId)return"https://www.dropbox.com/scl/fi/"+e.dropboxId+"/"+encodeURIComponent(e.filename)+"?rlkey="+e.rlkey+"&raw=1";if(e.dropboxId)return"https://dl.dropboxusercontent.com/s/"+e.dropboxId+"/"+encodeURIComponent(e.filename)}return"https://radiofragile.net/"+(e.folder||"AUDIO")+"/"+encodeURIComponent(e.filename)}(i),e.load(),F||function(){if(F||!M)return!0;try{if("suspended"===M.state)M.resume();if(rfIOS){F=!0;return!0}A=M.createMediaElementSource(e);rfFxF=M.createBiquadFilter();rfFxF.type="lowpass";rfFxF.frequency.value=20000;rfFxF.Q.value=1;rfFxW=M.createWaveShaper();rfFxW.oversample="4x";rfFxD=M.createDelay(1);rfFxD.delayTime.value=.001;rfFxFb=M.createGain();rfFxFb.gain.value=0;rfFxWet=M.createGain();rfFxWet.gain.value=0;A.connect(rfFxF);rfFxF.connect(rfFxW);rfFxW.connect(T);rfFxW.connect(rfFxD);rfFxD.connect(rfFxFb);rfFxFb.connect(rfFxD);rfFxD.connect(rfFxWet);rfFxWet.connect(T);T.connect(M.destination);F=!0;return!0}catch(err){return console.error("[RF] Audio connection error:",err),!1}}(),void 0,ae(),rfPP=!0,e.play().then(()=>{b=!0,rfPP=!1,l&&l.classList.remove("buffering"),t.querySelector("i").className="fas fa-pause",y&&y.classList.add("playing"),me(),pe(),ce(),function(){if("mediaSession"in navigator){navigator.mediaSession.metadata=new MediaMetadata({title:i.title,artist:i.artist,album:"RadioFragile",artwork:[{src:i.thumbnail,sizes:"512x512",type:"image/jpeg"}]});navigator.mediaSession.setActionHandler("play",function(){if(rfPP)return;se();rfPP=!0;e.play().then(function(){b=!0,rfPP=!1,t.querySelector("i").className="fas fa-pause",y&&y.classList.add("playing"),document.body.classList.add("rf-playing"),pe(),ce()}).catch(function(){rfPP=!1})});navigator.mediaSession.setActionHandler("pause",function(){e.pause(),b=!1,t.querySelector("i").className="fas fa-play",y&&y.classList.remove("playing"),document.body.classList.remove("rf-playing"),ve(),de(),rfIdA()});navigator.mediaSession.setActionHandler("previoustrack",function(){se();var idx=fe(w)-1;if(idx<0)idx=E.length-1;he(C[idx])});navigator.mediaSession.setActionHandler("nexttrack",function(){se();ge()});navigator.mediaSession.setActionHandler("seekto",function(d){if(d.seekTime!==undefined&&e.duration){e.currentTime=d.seekTime}})}}()}).catch(()=>{rfPP=!1,l&&l.classList.remove("buffering"),b=!1})}function ge(){if(0===E.length)return;let e=fe(w)+1;e>=E.length&&(e=0),he(C[e])}function pe(){rfIdS(),ve(),function t(n){!function(){if(!e.duration||isNaN(e.duration))return;o&&(o.style.width=e.currentTime/e.duration*100+"%");const t=e=>{if(isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return t+":"+(n<10?"0":"")+n};c&&(c.textContent=t(e.currentTime));d&&(d.textContent=t(e.duration));u&&(u.textContent=t(e.currentTime));f&&(f.textContent="-"+t(e.duration-e.currentTime))}(),function(){if(X&&Y){if(e.duration&&!isNaN(e.duration)){const n=e=>{if(isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return t+":"+(n<10?"0":"")+n};X.textContent=n(e.currentTime),Y.textContent="-"+n(e.duration-e.currentTime)}}}(),rfDrawSpikes(),L=requestAnimationFrame(t)}(performance.now())}function ve(){L&&(cancelAnimationFrame(L),L=null)}document.addEventListener("visibilitychange",()=>{document.hidden||(se(),b&&e.paused&&e.play().catch(()=>{}))}),document.addEventListener("touchstart",se,{passive:!0}),document.addEventListener("click",se),e.addEventListener("stalled",se),e.addEventListener("waiting",()=>{l&&l.classList.add("buffering")}),e.addEventListener("playing",()=>{l&&l.classList.remove("buffering"),se(),ce()}),t.addEventListener("click",function(){if(rfPP)return;se();if(!e.src&&E.length>0)he(C[0]);else if(b){e.pause(),b=!1,t.querySelector("i").className="fas fa-play",y&&y.classList.remove("playing"),ve(),de(),rfIdA()}else{rfPP=!0;e.play().then(()=>{b=!0,rfPP=!1,t.querySelector("i").className="fas fa-pause",y&&y.classList.add("playing"),pe(),ce()}).catch(()=>{rfPP=!1})}}),n.addEventListener("click",function(){if(0===E.length)return;let e=fe(w)-1;e<0&&(e=E.length-1),he(C[e])}),i.addEventListener("click",ge),a.addEventListener("input",()=>{e.volume=a.value/100}),r&&r.addEventListener("click",t=>{if(e.duration){const n=r.getBoundingClientRect();e.currentTime=(t.clientX-n.left)/n.width*e.duration}});var rfASI=null,rfASPsd=false,rfASPos=0;function rfASStep(){if(rfASPsd||!h.classList.contains("open"))return;var items=h.querySelectorAll(".playlist-item");var cnt=items.length;if(cnt<=4)return;rfASPos++;if(rfASPos>cnt-4){rfASPos=0;h.classList.add("rf-as-flash");setTimeout(function(){h.scrollTop=0;h.classList.remove("rf-as-flash")},200)}else{var from=h.scrollTop,to=items[rfASPos].offsetTop-items[0].offsetTop,st=0;h.classList.add("rf-as-flash");!function ns(){st++;if(st>=3){h.scrollTop=to;setTimeout(function(){h.classList.remove("rf-as-flash")},80)}else{h.scrollTop=from+(to-from)*(st/3);setTimeout(ns,50)}}()}}function rfASStart(){rfASStop();rfASPos=0;rfASPsd=false;h.scrollTop=0;rfASI=setInterval(rfASStep,3e3)}function rfASStop(){if(rfASI){clearInterval(rfASI);rfASI=null}rfASPos=0}function rfPlSize(){var items=h.querySelectorAll(".playlist-item");var cnt=Math.min(items.length,4);if(cnt>=1){var top=items[0].getBoundingClientRect().top,bot=items[cnt-1].getBoundingClientRect().bottom;h.style.maxHeight=Math.ceil(bot-top)+"px"}}m.addEventListener("click",()=>{m.classList.toggle("open"),h.classList.toggle("open"),document.querySelector(".playlist-section-wrapper")?.classList.toggle("open");if(h.classList.contains("open")){h.scrollTop=0;setTimeout(function(){rfPlSize();rfASStart()},650)}else{h.style.maxHeight="";rfASStop()}});window.addEventListener("resize",function(){if(h.classList.contains("open"))rfPlSize()});var rfASLT=null;h.addEventListener("mouseenter",function(){rfASPsd=true;if(rfASLT){clearTimeout(rfASLT);rfASLT=null}});h.addEventListener("mouseleave",function(){if(h.classList.contains("open")){var items=h.querySelectorAll(".playlist-item");if(items.length>1){var bt=items[0].offsetTop;rfASPos=0;for(var ri=0;ri<items.length;ri++){if(items[ri].offsetTop-bt<=h.scrollTop+5)rfASPos=ri}}rfASLT=setTimeout(function(){rfASPsd=false;rfASLT=null},2e3)}});h.addEventListener("touchstart",function(){rfASPsd=true},{passive:!0});h.addEventListener("touchend",function(){if(h.classList.contains("open"))setTimeout(function(){rfASPsd=false},2e3)});h.addEventListener("wheel",function(e){e.stopPropagation()},{passive:true}),function(){var pc=document.createElement("span");pc.className="rf-pl-cursor";pc.textContent="\u2588";var pt=m.querySelector("#playlist-title");if(pt)pt.appendChild(pc);else{var pa=m.querySelector(".playlist-arrow");if(pa)m.insertBefore(pc,pa)}}(),document.addEventListener("click",e=>{const t=e.target.closest("img[data-filename]");if(t){e.preventDefault();const n=E.findIndex(e=>e.filename===t.getAttribute("data-filename"));-1!==n&&(he(n),m.classList.add("open"),h.classList.add("open"))}}),e.addEventListener("ended",()=>{b=!1;t.querySelector("i").className="fas fa-play";y&&y.classList.remove("playing");var tg=document.getElementById("rf-toggle");if(tg){tg.textContent="►";tg.classList.remove("rf-playing")}ve();de();setTimeout(ge,300)}),e.addEventListener("canplay",()=>{l&&l.classList.remove("buffering")}),e.addEventListener("play",function(){document.body.classList.add("rf-playing");var tg=document.getElementById("rf-toggle");if(tg){tg.textContent="❚❚";tg.classList.add("rf-playing")}}),e.addEventListener("pause",function(){document.body.classList.remove("rf-playing");var tg=document.getElementById("rf-toggle");if(tg){tg.textContent="►";tg.classList.remove("rf-playing")}}),e.addEventListener("error",()=>{b&&w>=0&&setTimeout(()=>{e.load(),e.play().catch(()=>{})},1e3)});if(e.volume=a.value/100,function(){if(document.querySelector(".rf-top-section"))return;const t=document.createElement("div");t.className="rf-top-section";const n=document.querySelector(".player-header");n&&t.appendChild(n);const i=document.createElement("div");i.className="listening-marquee-container",i.innerHTML=`
<div class="listening-marquee">
<span class="listening-prefix">&gt;listening:</span>
<div class="listening-content">
<div class="listening-scroll" id="listening-scroll">
<span class="listening-item" id="listening-current">
<span class="listening-track-title">Select a track</span>
</span>
<span class="listening-divider">///</span>
<span class="listening-item" id="listening-next">
<span class="listening-next-label">NEXT:</span>
<span class="listening-track-title">---</span>
</span>
<span class="listening-divider">///</span>
<span class="listening-item listening-current-dup">
<span class="listening-track-title">Select a track</span>
</span>
<span class="listening-divider">///</span>
<span class="listening-item listening-next-dup">
<span class="listening-next-label">NEXT:</span>
<span class="listening-track-title">---</span>
</span>
</div>
</div>
</div>
`;const a=document.createElement("div");a.className="ascii-ekg-container",a.innerHTML=`
<div class="rf-spike-section" id="rf-spike-section">
<div class="rf-ekg-btns"><button class="rf-ekg-toggle" id="rf-toggle">►</button><button class="rf-ekg-stop" id="rf-stop">■</button></div><canvas class="rf-spike-canvas" id="rf-spike-canvas"></canvas>
</div>
<div class="rf-ekg-sub">
<div class="rf-ekg-nav"><button class="rf-ekg-prev" id="rf-prev">◄◄</button><button class="rf-ekg-next" id="rf-next">►►</button></div>
<div class="ascii-ekg-time-display">
<span class="ascii-ekg-time-elapsed" id="ascii-ekg-elapsed">0:00</span>
<div class="rf-fx-row" id="rf-fx-row"></div>
<span class="ascii-ekg-time-remaining" id="ascii-ekg-remaining">-0:00</span>
</div>
</div>
`,t.appendChild(i),t.appendChild(a);const r=document.querySelector(".radio-player-main");r&&r.parentNode&&r.parentNode.insertBefore(t,r),Q=document.getElementById("listening-scroll"),X=document.getElementById("ascii-ekg-elapsed"),Y=document.getElementById("ascii-ekg-remaining");rfSpkCvs=document.getElementById("rf-spike-canvas");if(rfSpkCvs){rfSpkCtx=rfSpkCvs.getContext("2d");rfSpkResize();setTimeout(rfSpkResize,100);setTimeout(rfSpkResize,500);rfIdA();window.addEventListener("resize",rfSpkResize);var spkSec=document.getElementById("rf-spike-section");if(spkSec){spkSec.addEventListener("click",function(ev){if(ev.target.closest(".rf-ekg-btns"))return;if(e.duration&&rfSpkCvs){var rc=rfSpkCvs.getBoundingClientRect();var ratio=Math.max(0,Math.min(1,(ev.clientX-rc.left)/rc.width));e.currentTime=ratio*e.duration}})}}}(),function(){var rfTgl=document.getElementById("rf-toggle");if(rfTgl)rfTgl.addEventListener("click",function(ev){ev.stopPropagation();if(rfPP)return;if(!e.src&&E.length>0){he(C[0])}else if(b){e.pause(),b=!1,t.querySelector("i").className="fas fa-play",y&&y.classList.remove("playing"),ve(),de(),rfIdA()}else{rfPP=!0;e.play().then(function(){b=!0,rfPP=!1,t.querySelector("i").className="fas fa-pause",y&&y.classList.add("playing"),me(),pe(),ce()}).catch(function(){rfPP=!1})}});var rr=document.getElementById("rf-prev");if(rr)rr.addEventListener("click",function(ev){ev.stopPropagation();if(0===E.length)return;var idx=fe(w)-1;if(idx<0)idx=E.length-1;he(C[idx])});var rs=document.getElementById("rf-next");if(rs)rs.addEventListener("click",function(ev){ev.stopPropagation();ge()});var rfStp=document.getElementById("rf-stop");if(rfStp)rfStp.addEventListener("click",function(ev){ev.stopPropagation();if(!e.src)return;e.pause();e.currentTime=0;b=!1;t.querySelector("i").className="fas fa-play";y&&y.classList.remove("playing");document.body.classList.remove("rf-playing");var tg=document.getElementById("rf-toggle");if(tg){tg.textContent="►";tg.classList.remove("rf-playing")}ve();de()});var cc=document.querySelector(".player-controls-container");if(cc)cc.style.display="none";var badge=document.querySelector(".live-badge");if(badge&&badge.parentNode){var wr=document.createElement("div");wr.className="rf-header-right";var tr=document.createElement("div");tr.className="rf-header-top-row";badge.parentNode.insertBefore(wr,badge);wr.appendChild(tr);var rfVc=document.querySelector(".volume-control-right");if(rfVc){tr.appendChild(rfVc);rfVc.style.display="flex"}}}(),(function(){var mc=document.querySelector(".listening-marquee");if(!mc)return;var lc=mc.querySelector(".listening-content");if(lc)lc.style.display="none";var lp=mc.querySelector(".listening-prefix");if(lp)lp.style.display="none";var tm=document.createElement("span");tm.className="rf-mq-term";tm.innerHTML='<span class="rf-mq-inner"><span class="rf-mq-text"></span><span class="rf-mq-cursor">\u2588</span></span>';mc.appendChild(tm);var inner=tm.querySelector(".rf-mq-inner"),te=tm.querySelector(".rf-mq-text"),lt=-1,msg="",ci=0,ph="typing",tt=null;function rs(){tm.scrollLeft=0}function bm(){if(0===E.length){msg="> SELECT A TRACK";return}var c=E[w]||{title:"---",artist:""},ni=fe(w)+1,pi=fe(w)-1;ni>=E.length&&(ni=0);pi<0&&(pi=E.length-1);var nx=E[C[ni]]||{title:"---"},pv=E[C[pi]]||{title:"---"};msg="> NOW: "+c.title.toUpperCase()+(c.artist?" - "+c.artist.toUpperCase():"")+" /// NEXT: "+nx.title.toUpperCase()+" /// PREV: "+pv.title.toUpperCase()}function rp(){te.textContent="";ci=0;rs();setTimeout(function(){ph="typing";tp()},400+400*Math.random())}function tp(){if("typing"!==ph)return;if(ci<msg.length){ci++;te.textContent=msg.substring(0,ci);tm.scrollLeft=tm.scrollWidth;var _mc=msg.charAt(ci-1);tt=setTimeout(tp,_mc==="."||_mc===","?200+100*Math.random():35+45*Math.random())}else{ph="hold";setTimeout(rp,3e3)}}setInterval(function(){if(w!==lt){lt=w;bm();ci=0;ph="typing";if(tt)clearTimeout(tt);te.textContent="";rs();tp()}},500);bm();tp()})(),function(){const t=document.querySelector(".volume-control-right");if(t&&a){a.style.display="none",t.innerHTML="";var n=document.createElement("span");n.className="rf-vol-label",n.textContent="VOL",t.appendChild(n);var i=document.createElement("div");i.className="rf-vol-bar";for(var r=[],o=0;o<10;o++){var l=document.createElement("div");l.className="rf-vol-block";l.style.height=(o*2+4)+"px";!function(t){l.addEventListener("click",function(n){n.stopPropagation(),e.volume=(t+1)/10,a.value=Math.round(100*e.volume),s()})}(o);r.push(l),i.appendChild(l)}t.appendChild(i),s(),e.addEventListener("volumechange",s)}function s(){var t=Math.round(10*e.volume);r.forEach(function(e,n){e.classList.toggle("active",n<t)})}}(),function(){const e=document.createElement("div");e.className="rf-immersive-overlay",e.id="rf-immersive-overlay",document.body.appendChild(e);const t=document.querySelector(".rf-header-top-row");if(!t)return;const n=document.createElement("button");n.className="rf-immersive-btn",n.id="rf-immersive-btn",n.innerHTML='<i class="fas fa-moon"></i>',n.type="button",n.title="Immersive mode",t.insertBefore(n,t.firstChild),n.addEventListener("click",function(e){e.stopPropagation(),ne()}),e.addEventListener("click",ne),document.addEventListener("keydown",function(e){"Escape"===e.key&&Z&&ne()})}(),(function(){var hc=document.createElement("canvas");hc.id="rf-holo-gl";hc.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:99996;mix-blend-mode:screen;opacity:0.4";document.body.appendChild(hc);var gl=hc.getContext("webgl",{alpha:true,premultipliedAlpha:false,antialias:false});if(!gl)return;var vs=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vs,"attribute vec2 p;void main(){gl_Position=vec4(p,0,1);}");gl.compileShader(vs);var fs=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fs,"precision mediump float;\nuniform float t;\nuniform vec2 r;\nvoid main(){\nvec2 uv=gl_FragCoord.xy/r;\nfloat y=uv.y;\nfloat scan=pow(max(0.,sin(y*r.y*0.8+t*1.5)),.25)*.07;\nfloat band=sin(y*30.-t*.3)*.5+.5;\nband=band*band*.025;\nfloat fy=abs(y-.5)*2.;\nfloat fx=abs(uv.x-.5)*2.;\nfloat fresnel=pow(fy,1.5)*.4+pow(fx,1.8)*.25;\nfloat cone=1.-length(vec2((uv.x-.5)*1.2,uv.y*.7))*.8;\ncone=clamp(cone,.0,1.);\ncone=cone*cone;\nvec3 base=vec3(0.,.95,1.);\nvec3 fringe=vec3(.7,0.,.9);\nvec3 col=mix(base,fringe,fresnel*3.);\nfloat chrom=sin(y*60.+t*.7)*.01;\ncol+=chrom*vec3(-.5,.5,1.);\nfloat a=(scan+band)*cone+fresnel;\nfloat flk=.95+.05*sin(t*13.7)*sin(t*7.3);\na*=flk;\na*=.4+.3*(1.-y);\ngl_FragColor=vec4(col*a,a);\n}");gl.compileShader(fs);var pg=gl.createProgram();gl.attachShader(pg,vs);gl.attachShader(pg,fs);gl.linkProgram(pg);if(!gl.getProgramParameter(pg,gl.LINK_STATUS)){console.error("[RF] Holo GL error");return}gl.useProgram(pg);var buf=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buf);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);var pLoc=gl.getAttribLocation(pg,"p");gl.enableVertexAttribArray(pLoc);gl.vertexAttribPointer(pLoc,2,gl.FLOAT,false,0,0);var uT=gl.getUniformLocation(pg,"t");var uR=gl.getUniformLocation(pg,"r");gl.enable(gl.BLEND);gl.blendFunc(gl.SRC_ALPHA,gl.ONE);function rs(){var dp=window.devicePixelRatio||1;var w=window.innerWidth;var h=window.innerHeight;hc.width=w*dp;hc.height=h*dp;gl.viewport(0,0,w*dp,h*dp);gl.uniform2f(uR,w*dp,h*dp)}rs();window.addEventListener("resize",rs);var st=performance.now()/1000;requestAnimationFrame(function lp(){if(!document.hidden){gl.uniform1f(uT,(performance.now()/1000)-st);gl.clear(gl.COLOR_BUFFER_BIT);gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}requestAnimationFrame(lp)})})(),function(){var noise=document.createElement("div");noise.className="rf-noise-overlay";document.body.appendChild(noise)}(),function(){}(),function(){var fxr=document.getElementById("rf-fx-row");if(!fxr)return;var shf=document.createElement("span");shf.className="rf-fx-ctrl";shf.textContent="SHF[\u2591\u2591\u2591]";shf.addEventListener("click",function(ev){ev.stopPropagation();I=!I;ue();me();ae();shf.className="rf-fx-ctrl"+(I?" rf-fx-on":"");var bl="";for(var bi=0;bi<3;bi++)bl+=I?"\u2588":"\u2591";var _ft="SHF["+bl+"]";shf.textContent="";requestAnimationFrame(function(){var _ci=0;(function _ta(){if(_ci<_ft.length){shf.textContent=_ft.substring(0,_ci+1);_ci++;setTimeout(_ta,60)}})()})});fxr.appendChild(shf);var fxSub=document.createElement("div");fxSub.className="rf-fx-sub";var fxN=["FLTR","DLY","CRSH"],fxK=["f","d","w"];fxN.forEach(function(nm,fi){var el=document.createElement("span");el.className="rf-fx-ctrl";el.textContent=nm+"[\u2591\u2591\u2591]";el.addEventListener("click",function(ev){ev.stopPropagation();rfFx[fxK[fi]]=(rfFx[fxK[fi]]+1)%4;var lv=rfFx[fxK[fi]],bl="";for(var bi=0;bi<3;bi++)bl+=bi<lv?"\u2588":"\u2591";var _ft=nm+"["+bl+"]";el.textContent=nm+"[";var _bi=0;(function _fa(){if(_bi<3){el.textContent=nm+"["+_ft.substring(nm.length+1,nm.length+2+_bi);_bi++;setTimeout(_fa,60)}else el.textContent=_ft})();el.className="rf-fx-ctrl"+(lv>0?" rf-fx-on":"");rfFxApply()});fxSub.appendChild(el)});fxr.appendChild(fxSub);var ekgS=document.querySelector(".rf-ekg-sub");if(ekgS){var fxMq=window.matchMedia("(max-width:960px) and (orientation:portrait)");function fxMv(e){if(e.matches){ekgS.parentNode.insertBefore(fxSub,ekgS.nextSibling)}else{fxr.appendChild(fxSub)}}fxMq.addEventListener("change",fxMv);fxMv(fxMq)}}(),E=[],document.querySelectorAll("img[data-filename]").forEach(e=>{const t=e.getAttribute("data-filename");if(t){const n=e.closest('.item_cell, .w-dyn-item, .collection-item, [class*="item"], [class*="card"]');let i="Track "+(E.length+1),a="RadioFragile",r="",o="";if(n){const e=n.querySelector('.item_title, .title, h3, h4, [class*="title"]');e&&(i=e.textContent.trim());const t=n.querySelector('.item_artist, .artist, [class*="artist"]');t&&(a=t.textContent.trim());const l=n.querySelector('.item_label, .label, [class*="label"]');l&&(r=l.textContent.trim());const s=n.querySelector('.item_year, .year, [class*="year"]');s&&(o=s.textContent.trim())}E.push({index:E.length,title:i,artist:a,label:r,year:o,filename:t,dropboxId:e.getAttribute("data-dropbox-id")||"",rlkey:e.getAttribute("data-rlkey")||"",source:e.getAttribute("data-source")||"hostinger",folder:e.getAttribute("data-folder")||"AUDIO",thumbnail:e.src})}}),ue(),me(),ae(),m&&h){var we=document.querySelector(".playlist-section-wrapper")}!function(){var sl=document.querySelector(".section_logo"),pw=document.querySelector(".playlist-section-wrapper"),sf=document.querySelector(".section_footer"),ts=document.querySelector(".rf-top-section"),rm=document.querySelector(".radio-player-main");if(rm)rm.style.display="none";if(pw&&ts&&ts.parentNode){ts.parentNode.insertBefore(pw,ts.nextSibling);}if(sl&&pw&&pw.parentNode){pw.parentNode.insertBefore(sl,pw.nextSibling);}if(sl){sl.style.display="flex";sl.style.justifyContent="center";sl.style.alignItems="center"}var bl=document.createElement("div");bl.className="rf-beam-line";if(sl&&sl.parentNode){sl.parentNode.insertBefore(bl,sl.nextSibling);}else if(pw&&pw.parentNode){pw.parentNode.insertBefore(bl,pw.nextSibling)}var blC=document.createElement("canvas");blC.className="rf-beam-cvs";bl.appendChild(blC);var blX=blC.getContext("2d"),blD=window.devicePixelRatio||1,blW=0,blH=8;function blRs(){var r=bl.getBoundingClientRect();blW=r.width||300;blC.width=blW*blD;blC.height=blH*blD;blX.setTransform(blD,0,0,blD,0,0)}blRs();window.addEventListener("resize",blRs);var blHd=0,blBt=0,blYa=new Float32Array(2e3);requestAnimationFrame(function blLp(){if(document.hidden){requestAnimationFrame(blLp);return}if(blW<2){blRs();requestAnimationFrame(blLp);return}var mid=blH/2,p=rfThemeColors.primaryRgb;blHd+=1.5;if(blHd>=blW){blHd=0;blBt=0;blYa.fill(0)}var ni=Math.floor(blHd);blX.clearRect(0,0,blW,blH);blX.strokeStyle="rgba("+p+",.5)";blX.lineWidth=1.5;blX.shadowColor="rgba("+p+",.6)";blX.shadowBlur=4;blX.beginPath();blX.moveTo(0,mid);for(var i=1;i<=ni&&i<blW;i++)blX.lineTo(i,mid-blYa[i]*(mid-1));blX.stroke();blX.shadowBlur=6;blX.fillStyle="rgba("+p+",.9)";blX.beginPath();blX.arc(blHd,mid-(blYa[ni]||0)*(mid-1),1.5,0,6.28);blX.fill();blX.shadowBlur=0;blX.strokeStyle="rgba("+p+",.04)";blX.lineWidth=.5;blX.beginPath();blX.moveTo(blHd+4,mid);blX.lineTo(blW,mid);blX.stroke();requestAnimationFrame(blLp)});if(sf){if(bl&&bl.parentNode){bl.parentNode.insertBefore(sf,bl.nextSibling);}var ftEls=sf.querySelectorAll(".text_credit_footer, a");ftEls.forEach(function(el){var txt=el.textContent.trim();if(txt&&txt.charAt(0)!==">"){el.textContent="> "+txt.toUpperCase()}});}var bmc=document.createElement("div");bmc.className="rf-bio-marquee";bmc.innerHTML='<span class="rf-bio-term"><span class="rf-bio-inner"><span class="rf-bio-text"></span><span class="rf-bio-cursor">\u2588</span></span></span>';if(sf&&sf.parentNode){sf.parentNode.insertBefore(bmc,sf.nextSibling)}else{document.body.appendChild(bmc)}var bioMsg="\u26A1\uFE0E TRANSMITTING THE FUTURE \u26A1\uFE0E WE OPERATES AT THE INTERSECTION OF AN ARCHIVE AND A RECORD LABEL. THE PROJECT IS TO DOCUMENT AND PUBLISH EXPERIMENTAL ELECTRONIC MUSIC, FROM FORGOTTEN TRACES TO CONTEMPORARY WORKS.";var bTm=bmc.querySelector(".rf-bio-term"),bIn=bmc.querySelector(".rf-bio-inner"),bTx=bmc.querySelector(".rf-bio-text"),bci=0,bph="typing",btt=null;function brs(){bTm.scrollLeft=0}function brp(){bTx.textContent="";bci=0;brs();setTimeout(function(){bph="typing";btp()},400+400*Math.random())}function btp(){if("typing"!==bph)return;if(bci<bioMsg.length){bci++;bTx.textContent=bioMsg.substring(0,bci);bTm.scrollLeft=bTm.scrollWidth;var _ch=bioMsg.charAt(bci-1);btt=setTimeout(btp,_ch==="."||_ch===","?200+100*Math.random():35+45*Math.random())}else{bph="hold";setTimeout(brp,3e3)}}brp();}();setTimeout(()=>{!function(){var e=document.createElement("div");e.className="rf-vu-section";var t=document.createElement("div");t.className="rf-vu-bar",t.innerHTML='<span class="rf-vu-label-text"></span><span class="rf-vu-cursor">\u2588</span>';setTimeout(function(){var vl=t.querySelector(".rf-vu-label-text");if(vl){var txt="> RADIO_FRAGILE",ci=0;(function tp(){if(ci<=txt.length){vl.textContent=txt.substring(0,ci);ci++;setTimeout(tp,70+Math.random()*60)}})()}},1500);var n=document.createElement("div");n.className="rf-vu-content";var i=document.createElement("canvas");i.className="rf-vu-canvas";i.id="rf-vu-canvas";n.appendChild(i);e.appendChild(t);e.appendChild(n);var ts=document.querySelector(".rf-top-section");if(ts&&ts.parentNode)ts.parentNode.insertBefore(e,ts);var a=i.getContext("2d");s();setTimeout(s,200);setTimeout(s,1e3);window.addEventListener("resize",s);var vuSp=null,vuAL=null,vuAR=null,vuBL=null,vuBR=null;function vuInitS(){if(vuSp||!M||!A)return;try{vuSp=M.createChannelSplitter(2),vuAL=M.createAnalyser(),vuAR=M.createAnalyser(),vuAL.fftSize=8192,vuAL.smoothingTimeConstant=.5,vuAR.fftSize=8192,vuAR.smoothingTimeConstant=.5,vuBL=new Uint8Array(vuAL.frequencyBinCount),vuBR=new Uint8Array(vuAR.frequencyBinCount),A.connect(vuSp),vuSp.connect(vuAL,0),vuSp.connect(vuAR,1)}catch(er){console.error("[RF] Stereo VU error:",er)}}var NB=20,smL=new Float32Array(NB),smR=new Float32Array(NB),pkL=new Float32Array(NB),pkR=new Float32Array(NB),pkTL=new Float64Array(NB),pkTR=new Float64Array(NB),vuCF=[31,44,63,88,125,177,250,354,500,707,1e3,1414,2e3,2828,4e3,5657,8e3,11314,16e3,2e4],vuLB=["31","","63","","125","","250","","500","","1k","","2k","","4k","","8k","","16k",""];function vuGB(an,buf){if(!an||!buf)return null;an.getByteFrequencyData(buf);var res=new Float32Array(NB),sr=M?M.sampleRate:44100,bs=sr/an.fftSize;for(var vi=0;vi<NB;vi++){var lo=vi===0?20:Math.sqrt(vuCF[vi-1]*vuCF[vi]),hi=vi===NB-1?sr/2:Math.sqrt(vuCF[vi]*(vuCF[vi+1]||sr/2)),bl=Math.max(0,Math.floor(lo/bs)),bh=Math.min(buf.length-1,Math.ceil(hi/bs)),sum=0,cnt=0;for(var vj=bl;vj<=bh;vj++)sum+=buf[vj],cnt++;if(cnt>0)res[vi]=Math.min(1,Math.pow(sum/(255*cnt),.7)*1.6)}return res}function vuGM(){if(!T||!R)return null;T.getByteFrequencyData(R);var res=new Float32Array(NB),sr=M?M.sampleRate:44100,bs=sr/T.fftSize;for(var vi=0;vi<NB;vi++){var lo=vi===0?20:Math.sqrt(vuCF[vi-1]*vuCF[vi]),hi=vi===NB-1?sr/2:Math.sqrt(vuCF[vi]*(vuCF[vi+1]||sr/2)),bl=Math.max(0,Math.floor(lo/bs)),bh=Math.min(R.length-1,Math.ceil(hi/bs)),sum=0,cnt=0;for(var vj=bl;vj<=bh;vj++)sum+=R[vj],cnt++;if(cnt>0)res[vi]=Math.min(1,Math.pow(sum/(255*cnt),.7)*1.6)}return res}function vuGC(nm){if(nm<.5){var vt=nm/.5;return[Math.floor(255*vt),255,Math.floor(255*(1-vt))]}var vt=(nm-.5)/.5;return[255,Math.floor(255*(1-vt)),Math.floor(255*vt)]}var vuGR=3.8,vuHT=500,vuFT=750,rl=0,vuPT=performance.now();requestAnimationFrame(function e(){if(document.hidden){requestAnimationFrame(e);return}if(!i.width){var now=Date.now();if(now-rl>500){rl=now;s()}requestAnimationFrame(e);return}var ct=performance.now(),dt=(ct-vuPT)/1e3;vuPT=ct;if(b&&!vuSp)vuInitS();var cw=i.width/(window.devicePixelRatio||1),ch=i.height/(window.devicePixelRatio||1);a.clearRect(0,0,cw,ch);var vdL=null,vdR=null;if(b&&vuAL&&vuAR)vdL=vuGB(vuAL,vuBL),vdR=vuGB(vuAR,vuBR);else if(b)vdL=vuGM(),vdR=vdL;if(!vdL){var tm=performance.now()/1e3;vdL=new Float32Array(NB);vdR=new Float32Array(NB);for(var vi=0;vi<NB;vi++)vdL[vi]=.15+.1*Math.sin(.3*vi+1.5*tm)+.05*Math.sin(.7*vi-.8*tm),vdR[vi]=.15+.1*Math.sin(.3*vi+1.5*tm+.5)+.05*Math.sin(.7*vi-.8*tm+.3)}for(var vi=0;vi<NB;vi++){smL[vi]=.5*smL[vi]+.5*vdL[vi],smR[vi]=.5*smR[vi]+.5*vdR[vi];if(smL[vi]>=pkL[vi])pkL[vi]=smL[vi],pkTL[vi]=ct;else if(ct-pkTL[vi]>vuHT)pkL[vi]=Math.max(0,pkL[vi]-vuGR*dt);if(smR[vi]>=pkR[vi])pkR[vi]=smR[vi],pkTR[vi]=ct;else if(ct-pkTR[vi]>vuHT)pkR[vi]=Math.max(0,pkR[vi]-vuGR*dt)}var _pb=0,_pm=0;for(var _i=0;_i<7;_i++){var _v=(smL[_i]+smR[_i])/2;if(_v>_pb)_pb=_v}for(var _i=7;_i<15;_i++){var _v=(smL[_i]+smR[_i])/2;if(_v>_pm)_pm=_v}rfVuBands={bass:_pb,mids:_pm};var vuGP=4,hw=(cw-vuGP)/2,bH=ch-4,bw=hw/NB,gw=bw*.1,nw=bw-gw,segH=3,segG=1,tsg=Math.floor(bH/(segH+segG));function vuDS(xo,sm,pk,pkT){for(var vi=0;vi<NB;vi++){var bx=xo+vi*bw+gw/2,lit=Math.floor(sm[vi]*tsg),pks=Math.floor(pk[vi]*tsg),pa=ct-pkT[vi],pAl=pa>vuHT?Math.max(0,1-(pa-vuHT)/vuFT):1;for(var vs=0;vs<tsg;vs++){var vy=bH-(vs+1)*(segH+segG),nm=vs/tsg,vc=vuGC(nm);a.fillStyle=vs<lit?"rgba("+vc[0]+","+vc[1]+","+vc[2]+",0.85)":vs===pks&&pks>0&&pAl>0?"rgba("+vc[0]+","+vc[1]+","+vc[2]+","+(0.9*pAl)+")":"rgba("+vc[0]+","+vc[1]+","+vc[2]+",0.06)",a.fillRect(bx,vy,nw,segH)}}}vuDS(0,smL,pkL,pkTL);vuDS(hw+vuGP,smR,pkR,pkTR);a.strokeStyle="rgba("+rfThemeColors.primaryRgb+",0.15)";a.lineWidth=1;a.beginPath();a.moveTo(hw+vuGP/2,0);a.lineTo(hw+vuGP/2,bH);a.stroke();requestAnimationFrame(e)});function s(){var e=i.getBoundingClientRect();if(0!==e.width){var t=window.devicePixelRatio||1;i.width=e.width*t,i.height=e.height*t,a.setTransform(t,0,0,t,0,0)}}}(),function e(t){b||rfDrawSpikes(),requestAnimationFrame(e)}(performance.now())},300)});
const ls=document.createElement("script");ls.src="https://unpkg.com/lenis@1.1.18/dist/lenis.min.js",ls.onload=function(){const e=new Lenis({duration:1.2,smoothWheel:!0});requestAnimationFrame(function t(n){e.raf(n),requestAnimationFrame(t)})},document.head.appendChild(ls);
